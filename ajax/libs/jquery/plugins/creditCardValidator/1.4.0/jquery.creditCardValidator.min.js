!function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=jQuery,a.fn.validateCreditCard=function(c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q;for(g=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"mastercard",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],null==d&&(d={}),null==(p=d.accept)&&(d.accept=function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)e=g[a],c.push(e.name);return c}()),q=d.accept,n=0,o=q.length;o>n;n++)if(f=q[n],b.call(function(){var a,b,c;for(c=[],a=0,b=g.length;b>a;a++)e=g[a],c.push(e.name);return c}(),f)<0)throw"Credit card type '"+f+"' is not supported";return h=function(a){var c,h,i;for(i=function(){var a,c,f,h;for(h=[],a=0,c=g.length;c>a;a++)e=g[a],f=e.name,b.call(d.accept,f)>=0&&h.push(e);return h}(),c=0,h=i.length;h>c;c++)if(f=i[c],a.match(f.pattern))return f;return null},j=function(a){var b,c,d,e,f,g;for(d=0,g=a.split("").reverse(),c=e=0,f=g.length;f>e;c=++e)b=g[c],b=+b,c%2?(b*=2,d+=10>b?b:b-9):d+=b;return 0===d%10},i=function(a,c){var d;return d=a.length,b.call(c.valid_length,d)>=0},m=function(a){var b,d;return f=h(a),d=!1,b=!1,null!=f&&(d=j(a),b=i(a,f)),c({card_type:f,luhn_valid:d,length_valid:b})},l=function(){var b;return b=k(a(this).val()),m(b)},k=function(a){return a.replace(/[ -]/g,"")},this.bind("input",function(){return a(this).unbind("keyup"),l.call(this)}),this.bind("keyup",function(){return l.call(this)}),0!==this.length&&l.call(this),this}}.call(this);